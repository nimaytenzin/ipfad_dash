<div
    class="flex align-items-center flex-column justify-content-center pb-4 text-center"
>
    <p-image
        [src]="adminProfileUri"
        alt="Image"
        width="100"
        imageClass="circular"
    />
    <p>
        {{ currentRole.role }} at {{ admin?.nameEnglish }}
        {{ admin?.nameDzongkha }}
    </p>
</div>

<form [formGroup]="updateUserForm" class="p-fluid p-2 flex flex-column gap-5">
    <div class="flex flex-column gap-2 flex-1">
        <label for="nameEnglish">Name English*</label>
        <input
            pInputText
            id="nameEnglish"
            formControlName="nameEnglish"
            type="text"
        />
    </div>
    <div class="flex flex-column gap-2 flex-1">
        <label for="nameDzongkha">Name Dzongkha</label>
        <input
            pInputText
            id="nameDzongkha"
            formControlName="nameDzongkha"
            type="text"
        />
    </div>

    <div class="flex flex-column gap-2 flex-1">
        <label for="nameEnglish">Phone Number*</label>
        <p-inputGroup>
            <p-inputGroupAddon>+975</p-inputGroupAddon>
            <p-inputNumber
                formControlName="phoneNumber"
                mode="decimal"
                inputId="withoutgrouping"
                [useGrouping]="false"
            />
        </p-inputGroup>
    </div>

    <div
        class="flex flex-column gap-2 flex-1"
        *ngIf="currentRole.role === userRoleEnum.ADMIN"
    >
        <label for="nameDzongkha">SMS Header Title *header of SMS title </label>
        <input
            pInputText
            id="nameDzongkha"
            formControlName="nameDzongkha"
            type="text"
        />
    </div>

    <div class="flex flex-column gap-2 flex-1">
        <label for="cid">CID</label>
        <input pInputText id="cid" formControlName="cid" type="text" />
    </div>

    <div class="flex flex-column gap-2 flex-1">
        <label for="cid">Email</label>
        <input pInputText id="email" formControlName="email" type="text" />
    </div>

    <div class="flex flex-column gap-2 flex-1">
        <label for="cid">Permanent Address</label>
        <input
            pInputText
            id="permanentAddress"
            formControlName="permanentAddress"
            type="text"
        />
    </div>
    <div class="flex justify-content-between gap-4 mt-4">
        <p-button
            (click)="updateUserDetails()"
            [disabled]="isSubmitting || updateUserForm.invalid"
            label="Update Details"
        ></p-button>
        <!-- <p-button severity="secondary" label="Cancel"></p-button> -->
    </div>
</form>

<p-divider></p-divider>

<div class="p-2 mt-3">
    <p-button
        label="Change password"
        severity="danger"
        (click)="showPasswordChangeModal = true"
        icon="pi pi-lock"
    ></p-button>
</div>

<p-dialog
    header="Edit Profile"
    [modal]="true"
    [(visible)]="showPasswordChangeModal"
    [style]="{ width: '25rem' }"
>
    <span class="p-text-secondary block mb-5">Reset your password.</span>
    <div class="flex align-items-center gap-3 mb-3">
        <label for="username" class="font-semibold w-6rem"
            >Enter New Password</label
        >
        <p-password [(ngModel)]="newPassword" [feedback]="false" />
    </div>
    <div class="flex align-items-center gap-3 mb-5">
        <label for="email" class="font-semibold w-6rem"
            >Enter Password again</label
        >
        <p-password [(ngModel)]="newPasswordReentry" [feedback]="false" />
    </div>
    <div class="flex justify-content-end gap-2">
        <!-- <p-button
            label="Cancel"
            severity="secondary"
            (onClick)="showPasswordChangeModal = false"
        /> -->
        <p-button label="Reset Password" (click)="updatePassword()" />
    </div>
</p-dialog>
