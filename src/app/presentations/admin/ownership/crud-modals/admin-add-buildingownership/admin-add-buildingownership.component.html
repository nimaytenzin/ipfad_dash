<div>
    <p>Name:{{ building?.name }}</p>
    <p>
        {{ building?.address }}, {{ building.dzongkhag.name }}
        {{ building?.administrativeZone?.name }},
        {{ building.subadministrativeZone.name }}
    </p>

    <div class="flex flex-column gap-2 my-4">
        <p class="text-xl">
            Search Owner <small>Press enter to initiate search</small>
        </p>
        <p-inputGroup>
            <p-inputGroupAddon>
                <i class="pi pi-user"></i>
            </p-inputGroupAddon>
            <input
                pInputText
                [(ngModel)]="searchName"
                required
                placeholder="Search by Name"
                (keyup.enter)="searchOwnerByName()"
            />
        </p-inputGroup>

        <p-inputGroup>
            <p-inputGroupAddon>
                <i class="pi pi-phone"></i>
            </p-inputGroupAddon>
            <input
                type="text"
                pInputText
                [(ngModel)]="searchPhoneNumber"
                placeholder="Search by Phone Number"
                (keyup.enter)="searchOwnerByPhoneNumber()"
            />
        </p-inputGroup>
        <p-inputGroup>
            <p-inputGroupAddon>
                <i class="pi pi-credit-card"></i>
            </p-inputGroupAddon>
            <input
                type="text"
                (keyup.enter)="searchOwnerByCid()"
                pInputText
                placeholder="Search by CID"
            />
        </p-inputGroup>
    </div>
    <div>
        <p class="text-xl">Search Results</p>
        <hr />

        <p *ngIf="!searched">...please search for the owners</p>
        <p *ngIf="searched && !searchResult" class="text-red-500">
            ... opps no owners found
        </p>
        <div *ngIf="searched && searchResult">
            <p class="text-green-500">Owner found</p>
            <p>{{ searchResult.firstName }} {{ searchResult.lastName }}</p>
            <p>CID: {{ searchResult.cid }}</p>
            <p>Phone: {{ searchResult.phoneNumber }}</p>

            <p-button
                size="small"
                label="Map Ownership"
                (click)="mapBuildingOwner()"
            />
        </div>

        <p-dialog
            header="Ownership Details"
            [modal]="true"
            [(visible)]="visible"
            [style]="{ width: '25rem' }"
        >
            <div class="flex align-items-center gap-3 mb-3">
                <label for="username" class="font-semibold w-6rem"
                    >Ownership Type</label
                >
                <p-dropdown
                    [options]="ownershipTypes"
                    [(ngModel)]="selectedOwnershipType"
                    placeholder="Select type"
                />
            </div>
            <div class="flex align-items-center gap-3 mb-5">
                <label for="email" class="font-semibold w-6rem"
                    >Ownership Percentage</label
                >
                <p-inputNumber
                    inputId="locale-us"
                    [(ngModel)]="ownershipPercentage"
                />
            </div>
            <div class="flex justify-content-end gap-2">
                <p-button
                    label="Cancel"
                    severity="secondary"
                    (click)="visible = false"
                />
                <p-button label="Map" (click)="confirmMapOwnership()" />
            </div>
        </p-dialog>
    </div>
</div>
