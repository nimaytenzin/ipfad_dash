<form [formGroup]="createThramForm" class="p-fluid p-2 flex flex-column gap-4">
    <div class="flex flex-column gap-2">
        <label for="nameEnglish">Thram Number</label>
        <input
            pInputText
            id="nameEnglish"
            formControlName="thramNo"
            type="text"
        />

        <div
            *ngIf="
                createThramForm.get('thramNo')?.invalid &&
                createThramForm.get('thramNo')?.touched
            "
            class="p-error"
        >
            <small *ngIf="createThramForm.get('thramNo')?.errors?.['required']"
                >Thram Number is required.</small
            >
        </div>
    </div>

    <div class="flex p-fluid justify-content-between gap-4">
        <div class="flex flex-column gap-2 flex-1">
            <label for="chiwog">Ownership Type</label>
            <p-dropdown
                id="chiwog"
                [options]="ownerTypes"
                appendTo="body"
                formControlName="ownershipType"
            ></p-dropdown>
            <div
                *ngIf="
                    createThramForm.get('ownershipType')?.invalid &&
                    createThramForm.get('ownershipType')?.touched
                "
                class="p-error"
            >
                <small>Ownership Type is required.</small>
            </div>
        </div>
    </div>

    <div class="flex flex-column gap-2 flex-1">
        <label for="dzongkhag">Dzongkhag</label>
        <p-dropdown
            id="dzongkhag"
            [options]="dzongkhags"
            optionValue="id"
            optionLabel="name"
            appendTo="body"
            (onChange)="dzongkhagSelected($event)"
            formControlName="dzongkhagId"
        ></p-dropdown>
        <div
            *ngIf="
                createThramForm.get('dzongkhagId')?.invalid &&
                createThramForm.get('dzongkhagId')?.touched
            "
            class="p-error"
        >
            <small>Dzongkhag is required.</small>
        </div>
    </div>

    <div class="flex flex-column gap-2 flex-1">
        <label for="gewog">Administrative Zone</label>
        <p-dropdown
            id="bankName"
            optionValue="id"
            optionLabel="name"
            appendTo="body"
            (onChange)="administrativeZoneSelect($event)"
            [options]="administrativeZones"
            formControlName="administrativeZoneId"
        >
        </p-dropdown>
        <div
            *ngIf="
                createThramForm.get('administrativeZoneId')?.invalid &&
                createThramForm.get('administrativeZoneId')?.touched
            "
            class="p-error"
        >
            <small>Administrative Zone is required.</small>
        </div>
    </div>
    <div class="flex flex-column gap-2">
        <label for="chiwog">Sub AdministrativeZone</label>
        <p-dropdown
            id="chiwog"
            [options]="subAdministrativeZones"
            optionValue="id"
            optionLabel="name"
            appendTo="body"
            formControlName="subAdministrativeZoneId"
        ></p-dropdown>
        <div
            *ngIf="
                createThramForm.get('subAdministrativeZoneId')?.invalid &&
                createThramForm.get('subAdministrativeZoneId')?.touched
            "
            class="p-error"
        >
            <small>Sub Administrative Zone is required.</small>
        </div>
    </div>

    <div class="flex flex-column gap-2">
        <label for="chiwog">Owners</label>
        <p class="font-semibold">
            <span *ngFor="let owner of this.createThramForm.value.owners">
                {{ owner.nameEnglish }}/{{ owner.nameDzongkha }} ,
            </span>
        </p>
        <hr />
        <p-multiSelect
            [options]="owners"
            placeholder="Select Owners"
            [filter]="true"
            filterBy="nameEnglish"
            appendTo="body"
            formControlName="owners"
            optionLabel="nameEnglish"
        />

        <div
            *ngIf="
                createThramForm.get('ownerId')?.invalid &&
                createThramForm.get('ownerId')?.touched
            "
            class="p-error"
        >
            <small>Owner Organization is required.</small>
        </div>
    </div>

    <div class="flex justify-content-end gap-4">
        <p-button
            (click)="createThram()"
            label="Create Thram"
            [disabled]="isSubmitting || createThramForm.invalid"
        ></p-button>
        <p-button
            severity="secondary"
            label="Cancel"
            (click)="close()"
        ></p-button>
    </div>
</form>
