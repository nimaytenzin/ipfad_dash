<div class="stepsdemo-content">
    <p-card>
        <ng-template pTemplate="title"> Lease Properties </ng-template>
        <ng-template pTemplate="subtitle">
            Enter your card details
        </ng-template>
        <ng-template pTemplate="content">
            <div class="flex flex-column text-xl text-center gap-4">
                <p>
                    The <strong>LANDLORD</strong> leases the following proeprty
                    under his name to the
                    <strong>TENANT</strong>
                </p>

                <div class="p-fluid">
                    <p-dropdown
                        [options]="buildings"
                        [(ngModel)]="selectedBuilding"
                        optionLabel="name"
                        [showClear]="true"
                        (onChange)="loadUnitsByBuilding()"
                        placeholder="Select a Building "
                    >
                        <ng-template pTemplate="selectedItem">
                            <p *ngIf="selectedBuilding">
                                Building with ID
                                {{ selectedBuilding.id }},
                                <span *ngIf="selectedBuilding.name">
                                    {{ selectedBuilding.name }}
                                </span>
                                at
                                {{ selectedBuilding.dzongkhag.name }},
                                {{ selectedBuilding.administrativeZone.name }},
                                {{
                                    selectedBuilding.subadministrativeZone.name
                                }}
                                on plot ID
                                <span
                                    *ngFor="let plot of selectedBuilding.plots"
                                >
                                    {{ plot.plotId }}
                                </span>
                            </p>
                        </ng-template>
                        <ng-template let-building pTemplate="item ">
                            <p>
                                Building with ID
                                {{ building.id }},
                                <span *ngIf="building.name">
                                    {{ building.name }}
                                </span>
                                at {{ building.dzongkhag.name }},
                                {{ building.administrativeZone.name }},
                                {{ building.subadministrativeZone.name }}
                                on plot ID
                                <span *ngFor="let plot of building.plots">
                                    {{ plot.plotId }}
                                </span>
                            </p>
                        </ng-template>
                    </p-dropdown>
                </div>

                <div class="flex gap-2">
                    <div class="p-fluid">
                        <p-dropdown
                            [options]="units"
                            [(ngModel)]="selectedUnit"
                            optionLabel="name"
                            [showClear]="true"
                            placeholder="Select Unit"
                        >
                            <ng-template pTemplate="selectedItem">
                                <p *ngIf="selectedUnit">
                                    {{ selectedUnit.floorLevel }}-{{
                                        selectedUnit.unitNumber
                                    }}
                                </p>
                            </ng-template>
                            <ng-template let-unit pTemplate="item">
                                <p>
                                    {{ unit.floorLevel }}-{{ unit.unitNumber }}
                                </p>
                            </ng-template>
                        </p-dropdown>
                    </div>

                    <div class="p-fluid">
                        <p-dropdown
                            [options]="uses"
                            [(ngModel)]="selectedUse"
                            [showClear]="true"
                            placeholder="Select Unit"
                        >
                        </p-dropdown>
                    </div>
                </div>
                <p *ngIf="selectedBuilding && selectedUnit && selectedUse">
                    Unit
                    <strong
                        >{{ selectedUnit.floorLevel }}-{{
                            selectedUnit.unitNumber
                        }}</strong
                    >
                    of Building with ID
                    <strong
                        >{{ selectedBuilding.id }},
                        <span *ngIf="selectedBuilding.name">
                            {{ selectedBuilding.name }}
                        </span></strong
                    >
                    at
                    <strong
                        >{{ selectedBuilding.dzongkhag.name }},
                        {{ selectedBuilding.administrativeZone.name }},
                        {{
                            selectedBuilding.subadministrativeZone.name
                        }}</strong
                    >
                    on plot
                    <ng-container
                        *ngFor="
                            let plot of selectedBuilding.plots;
                            let i = index
                        "
                    >
                        <strong>
                            {{ plot.plotId }}
                        </strong>
                        <ng-container
                            *ngIf="i < selectedBuilding.plots.length - 1"
                            >,</ng-container
                        >
                    </ng-container>
                    is leased to the <strong>TENANT</strong> for
                    <strong>
                        {{ selectedUse }}
                    </strong>
                    purpose
                </p>
            </div>
        </ng-template>
        <ng-template pTemplate="footer">
            <div class="grid grid-nogutter justify-content-between">
                <p-button
                    label="Back"
                    (onClick)="prevPage()"
                    icon="pi pi-angle-left"
                ></p-button>
                <p-button
                    label="Next"
                    [disabled]="
                        !selectedBuilding && !selectedUnit && !selectedUse
                    "
                    (onClick)="nextPage()"
                    icon="pi pi-angle-right"
                    iconPos="right"
                ></p-button>
            </div>
        </ng-template>
    </p-card>
</div>
