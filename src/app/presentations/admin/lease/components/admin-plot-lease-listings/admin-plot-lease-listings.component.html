<div #upcomingExpiry *ngIf="upcomingExpiryLeaseAgreements.length">
    <div class="flex justify-content-between mt-5 mb-1">
        <p class="font-semibold">Upcoming Expiration</p>
    </div>

    <p-table
        [value]="upcomingExpiryLeaseAgreements"
        *ngIf="upcomingExpiryLeaseAgreements.length"
        styleClass="p-datatable-striped mb-2"
    >
        <ng-template pTemplate="header">
            <tr>
                <th>ref</th>
                <th>Status</th>
                <th>Plot</th>
                <th>Admin Zone</th>
                <th>Sub Admin Zone</th>
                <th>Lessee Type</th>
                <th>Lessee</th>
                <th>Use</th>
                <th>Rate/Sqft</th>
                <th>Start Date</th>
                <th>Duration</th>
                <th>Monthly Payable</th>
                <th></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item>
            <tr>
                <td>
                    <p>
                        {{ item.id }}
                    </p>
                </td>
                <td>
                    <p
                        [ngClass]="getStatusClass(item.status)"
                        class="border-round text-center font-semibold text-sm"
                    >
                        {{ getStatusName(item.status) }}
                    </p>
                </td>

                <td>
                    <p style="text-wrap: nowrap">
                        {{ item.plot.plotId }}
                    </p>
                </td>
                <td>{{ item.plot.thram.administrativeZone.name }}</td>
                <td>
                    {{ item.plot.thram.subAdministrativeZone.name }}
                </td>

                <td>
                    {{ item.lesseeType | lowercase }}
                </td>

                <td>
                    <div *ngIf="item.lesseeType === 'INDIVIDUAL'">
                        <p
                            pTooltip="double click to view Tenant details"
                            class="cursor-pointer hover:underline font-semibold"
                            (dblclick)="goToTenantDetailedView(item.tenant.id)"
                            style="text-wrap: nowrap"
                        >
                            Name: {{ item.tenant?.nameEnglish }}
                        </p>
                        <p>
                            {{ item.tenant.phoneNumber }}
                        </p>
                    </div>
                    <div *ngIf="item.lesseeType !== 'INDIVIDUAL'">
                        <p>Name: {{ item.organization.name }}</p>
                        <p
                            pTooltip="double click to view Tenant details"
                            tooltipPosition="left"
                            class="cursor-pointer hover:underline font-semibold"
                            (dblclick)="goToTenantDetailedView(item.tenant.id)"
                            style="text-wrap: nowrap"
                        >
                            {{ item.organization.userType }} :
                            {{ item.tenant?.nameEnglish }}
                        </p>
                        <p>Phone Number: {{ item.tenant.phoneNumber }}</p>
                    </div>
                </td>
                <td>
                    {{ item.use | lowercase }}
                </td>
                <td>
                    {{ item.ratePerArea }}
                </td>
                <td>
                    <p style="text-wrap: nowrap">
                        {{ item.leaseStartDate | date : "mediumDate" }}
                    </p>
                </td>
                <td>{{ item.leaseDurationMonths }} Months</td>
                <td>Nu.{{ computeMonthlyPayable(item) }}</td>

                <td>
                    <div class="flex gap-2">
                        <p-button
                            size="small"
                            label="View"
                            (click)="goToDetailedView(item)"
                            severity="secondary"
                            icon="pi pi-eye"
                        ></p-button>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
</div>

<div #activeLease>
    <div class="flex justify-content-between mt-5 mb-1">
        <p class="font-semibold">Active Lease</p>
    </div>

    <p-table
        [value]="activeLeaseAgreements"
        *ngIf="activeLeaseAgreements.length"
        styleClass="p-datatable-striped mb-2"
    >
        <ng-template pTemplate="header">
            <tr>
                <th>ref</th>
                <th>Status</th>
                <th>Plot</th>
                <th>Admin Zone</th>
                <th>Sub Admin Zone</th>
                <th>Lessee Type</th>
                <th>Lessee</th>
                <th>Use</th>
                <th>Rate/Sqft</th>
                <th>Start Date</th>
                <th>Duration</th>
                <th>Monthly Payable</th>
                <th></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item>
            <tr>
                <td>
                    <p>
                        {{ item.id }}
                    </p>
                </td>
                <td>
                    <p
                        [ngClass]="getStatusClass(item.status)"
                        class="border-round text-center font-semibold text-sm"
                    >
                        {{ getStatusName(item.status) }}
                    </p>
                </td>

                <td>
                    <p style="text-wrap: nowrap">
                        {{ item.plot.plotId }}
                    </p>
                </td>
                <td>{{ item.plot.thram.administrativeZone.name }}</td>
                <td>
                    {{ item.plot.thram.subAdministrativeZone.name }}
                </td>

                <td>
                    {{ item.lesseeType | lowercase }}
                </td>

                <td>
                    <div *ngIf="item.lesseeType === 'INDIVIDUAL'">
                        <p
                            pTooltip="double click to view Tenant details"
                            class="cursor-pointer hover:underline font-semibold"
                            (dblclick)="goToTenantDetailedView(item.tenant.id)"
                            style="text-wrap: nowrap"
                        >
                            Name: {{ item.tenant?.nameEnglish }}
                        </p>
                        <p>
                            {{ item.tenant.phoneNumber }}
                        </p>
                    </div>
                    <div *ngIf="item.lesseeType !== 'INDIVIDUAL'">
                        <p>Name: {{ item.organization.name }}</p>
                        <p
                            pTooltip="double click to view Tenant details"
                            tooltipPosition="left"
                            class="cursor-pointer hover:underline font-semibold"
                            (dblclick)="goToTenantDetailedView(item.tenant.id)"
                            style="text-wrap: nowrap"
                        >
                            {{ item.organization.userType }} :
                            {{ item.tenant?.nameEnglish }}
                        </p>
                        <p>Phone Number: {{ item.tenant.phoneNumber }}</p>
                    </div>
                </td>
                <td>
                    {{ item.use | lowercase }}
                </td>
                <td>
                    {{ item.ratePerArea }}
                </td>
                <td>
                    <p style="text-wrap: nowrap">
                        {{ item.leaseStartDate | date : "mediumDate" }}
                    </p>
                </td>
                <td>{{ item.leaseDurationMonths }} Months</td>
                <td>Nu.{{ computeMonthlyPayable(item) }}</td>

                <td>
                    <div class="flex gap-2">
                        <p-button
                            size="small"
                            label="View"
                            (click)="goToDetailedView(item)"
                            severity="secondary"
                            icon="pi pi-eye"
                        ></p-button>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>
    <p *ngIf="!activeLeaseAgreements.length">- No Active lease agreements</p>
</div>

<div #pendingLease>
    <div class="flex justify-content-between mt-5 mb-1">
        <p class="font-semibold">Pending Lease</p>
    </div>

    <p-table
        [value]="pendingLeaseAgreements"
        *ngIf="pendingLeaseAgreements.length"
        styleClass="p-datatable-striped mb-2"
    >
        <ng-template pTemplate="header">
            <tr>
                <th>ref</th>
                <th>Status</th>
                <th>Plot</th>
                <th>Admin Zone</th>
                <th>Sub Admin Zone</th>
                <th>Lessee Type</th>
                <th>Lessee</th>
                <th>Use</th>
                <th>Rate/Sqft</th>
                <th>Start Date</th>
                <th>Duration</th>
                <th>Monthly Payable</th>
                <th></th>
            </tr>
        </ng-template>
        <ng-template pTemplate="body" let-item>
            <tr>
                <td>
                    <p>
                        {{ item.id }}
                    </p>
                </td>
                <td>
                    <p
                        [ngClass]="getStatusClass(item.status)"
                        class="border-round text-center font-semibold text-sm"
                    >
                        {{ getStatusName(item.status) }}
                    </p>
                </td>

                <td>
                    <p style="text-wrap: nowrap">
                        {{ item.plot.plotId }}
                    </p>
                </td>
                <td>{{ item.plot.thram.administrativeZone.name }}</td>
                <td>
                    {{ item.plot.thram.subAdministrativeZone.name }}
                </td>

                <td>
                    {{ item.lesseeType | lowercase }}
                </td>

                <td>
                    <div *ngIf="item.lesseeType === 'INDIVIDUAL'">
                        <p
                            pTooltip="double click to view Tenant details"
                            class="cursor-pointer hover:underline font-semibold"
                            (dblclick)="goToTenantDetailedView(item.tenant.id)"
                            style="text-wrap: nowrap"
                        >
                            Name: {{ item.tenant?.nameEnglish }}
                        </p>
                        <p>
                            {{ item.tenant.phoneNumber }}
                        </p>
                    </div>
                    <div *ngIf="item.lesseeType !== 'INDIVIDUAL'">
                        <p>Name: {{ item.organization.name }}</p>
                        <p
                            pTooltip="double click to view Tenant details"
                            tooltipPosition="left"
                            class="cursor-pointer hover:underline font-semibold"
                            (dblclick)="goToTenantDetailedView(item.tenant.id)"
                            style="text-wrap: nowrap"
                        >
                            {{ item.organization.userType }} :
                            {{ item.tenant?.nameEnglish }}
                        </p>
                        <p>Phone Number: {{ item.tenant.phoneNumber }}</p>
                    </div>
                </td>
                <td>
                    {{ item.use | lowercase }}
                </td>
                <td>
                    {{ item.ratePerArea }}
                </td>
                <td>
                    <p style="text-wrap: nowrap">
                        {{ item.leaseStartDate | date : "mediumDate" }}
                    </p>
                </td>
                <td>{{ item.leaseDurationMonths }} Months</td>
                <td>Nu.{{ computeMonthlyPayable(item) }}</td>

                <td>
                    <div class="flex gap-2">
                        <p-button
                            size="small"
                            label="View"
                            (click)="goToDetailedView(item)"
                            severity="secondary"
                            icon="pi pi-eye"
                        ></p-button>
                    </div>
                </td>
            </tr>
        </ng-template>
    </p-table>

    <p *ngIf="!pendingLeaseAgreements.length">- No pending lease agreements</p>
</div>

<div>
    <div class="flex justify-content-between mt-5 mb-1">
        <p class="font-semibold">Lease History</p>
    </div>

    <div *ngIf="paginatedLeaseHistory.count">
        <div class="flex align-items-center mb-2 justify-content-between">
            <div>
                <p>
                    Showing {{ paginatedLeaseHistory.data.length }} of
                    {{ paginatedLeaseHistory.count }} Entries
                </p>
            </div>
            <div class="">
                <p-paginator
                    (onPageChange)="onPageChange($event)"
                    [first]="firstPageNumber"
                    [rows]="rows"
                    [totalRecords]="paginatedLeaseHistory.count"
                    [rowsPerPageOptions]="rowsPerPageOptions"
                    [showFirstLastIcon]="true"
                    #paginator
                ></p-paginator>
            </div>
        </div>

        <p-table
            [value]="paginatedLeaseHistory.data"
            styleClass="p-datatable-striped mb-2"
        >
            <ng-template pTemplate="header">
                <tr>
                    <th>ref</th>
                    <th>Status</th>
                    <th>Plot</th>
                    <th>Admin Zone</th>
                    <th>Sub Admin Zone</th>
                    <th>Lessee Type</th>
                    <th>Lessee</th>
                    <th>Use</th>
                    <th>Rate/Sqft</th>
                    <th>Start Date</th>
                    <th>Duration</th>
                    <th>Monthly Payable</th>
                    <th></th>
                </tr>
            </ng-template>
            <ng-template pTemplate="body" let-item>
                <tr>
                    <td>
                        <p>
                            {{ item.id }}
                        </p>
                    </td>
                    <td>
                        <p
                            [ngClass]="getStatusClass(item.status)"
                            class="border-round text-center font-semibold text-sm"
                        >
                            {{ getStatusName(item.status) }}
                        </p>
                    </td>

                    <td>
                        <p
                            pTooltip="Double click to view Plot details"
                            tooltipPosition="left"
                            class="cursor-pointer hover:underline font-semibold"
                            (dblclick)="goToPlotDetailedView(item.plot)"
                            style="text-wrap: nowrap"
                        >
                            {{ item.plot.plotId }}
                        </p>
                    </td>
                    <td>{{ item.plot.thram.administrativeZone.name }}</td>
                    <td>
                        {{ item.plot.thram.subAdministrativeZone.name }}
                    </td>

                    <td>
                        {{ item.lesseeType | lowercase }}
                    </td>

                    <td>
                        <div *ngIf="item.lesseeType === 'INDIVIDUAL'">
                            <p
                                pTooltip="double click to view Tenant details"
                                class="cursor-pointer hover:underline font-semibold"
                                (dblclick)="
                                    goToTenantDetailedView(item.tenant.id)
                                "
                                style="text-wrap: nowrap"
                            >
                                Name: {{ item.tenant?.nameEnglish }}
                            </p>
                            <p>
                                {{ item.tenant.phoneNumber }}
                            </p>
                        </div>
                        <div *ngIf="item.lesseeType !== 'INDIVIDUAL'">
                            <p>Name: {{ item.organization.name }}</p>
                            <p
                                pTooltip="double click to view Tenant details"
                                tooltipPosition="left"
                                class="cursor-pointer hover:underline font-semibold"
                                (dblclick)="
                                    goToTenantDetailedView(item.tenant.id)
                                "
                                style="text-wrap: nowrap"
                            >
                                {{ item.organization.userType }} :
                                {{ item.tenant?.nameEnglish }}
                            </p>
                            <p>Phone Number: {{ item.tenant.phoneNumber }}</p>
                        </div>
                    </td>
                    <td>
                        {{ item.use | lowercase }}
                    </td>
                    <td>
                        {{ item.ratePerArea }}
                    </td>
                    <td>
                        <p style="text-wrap: nowrap">
                            {{ item.leaseStartDate | date : "mediumDate" }}
                        </p>
                    </td>
                    <td>{{ item.leaseDurationMonths }} Months</td>
                    <td>Nu.{{ computeMonthlyPayable(item) }}</td>

                    <td>
                        <div class="flex gap-2">
                            <p-button
                                size="small"
                                label="View"
                                (click)="goToDetailedView(item)"
                                severity="secondary"
                                icon="pi pi-eye"
                            ></p-button>
                        </div>
                    </td>
                </tr>
            </ng-template>
        </p-table>
    </div>

    <p *ngIf="!paginatedLeaseHistory.count">- No Lease history to show</p>
</div>
